<html>
    <head>
    <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>repl.it</title>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <style>
          canvas {background-color: #001E62;z-index:27;}
        </style>
    </head>
        
    <body>
        <p id ="lives">Lives: </p>
        <p id ="livecount">3</p>
        <p id ="score">Score: </p>
        <p id ="scorecount">0</p>
        <canvas width = "500" height = "300" id = "myCanvas2" background.color = "red"></canvas>
        <script type="text/javascript">
            var circleX = 50;
            var circleY = 100;
            var pmoveSpeed = 5;
            var foemoveSpeed = 3;
            var foeWidth = 10;
            var foeHeight = 10;
            var direct = 1;
            var rad = 50;
            var can = document.getElementById ("myCanvas2");
            var hei = can.height;
            var initposy = Math.random()*hei - foeHeight;
            var foe = {type:"Foe", speed:foemoveSpeed, xPos:500,yPos:initposy};
            var foes = [foe];
            
            document.onkeydown = checkKey;
            
            

            // For more foes, can use foes.push(object) to append to array
            function drawcircle()
            {
                var can = document.getElementById ("myCanvas2");
                var ctx = can.getContext("2d");
                var wid = can.width;
                var hei = can.height;
                var val;
                for (val of foes)
                {
                    if (val.xPos + foeWidth < 0)
                    {
                        val.xPos = 500 + (Math.random() * 200)
                        val.yPos = Math.random() * (hei-foeHeight);
                    }
                    
                }
                ctx.clearRect(0, 0, wid, hei);
                ctx.fillStyle = "#FFFFFF";
                ctx.beginPath();
                ctx.arc(circleX, circleY, rad, 0, 2 * Math.PI);
                for (val of foes)
                {
                    ctx.fillRect(val.xPos, val.yPos, foeWidth, foeHeight);   
                    foe.xPos -= foemoveSpeed;
                }
                ctx.fill();
                requestAnimationFrame(drawcircle);
                
            }
            
            function checkKey(e){
                if (e.key == 'ArrowDown')
                {
                    var can = document.getElementById ("myCanvas2");
                    var dimY = can.height;
                    console.log(dimY);
                    if (circleY < (dimY - rad))
                    {
                        console.log(circleY);
                        circleY += pmoveSpeed;
                    }

                }
                else if (e.key == 'ArrowUp')
                {
                    if (circleY > rad)
                    {
                        console.log(circleY);
                        circleY-= pmoveSpeed;
                    }
                    
                }
            }
            requestAnimationFrame(drawcircle);
        </script>
    </body>
    
    
    
</html>